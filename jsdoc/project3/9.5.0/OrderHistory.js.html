<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: OrderHistory.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: OrderHistory.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
import { useState, useEffect } from 'react';
import React from "react";
import { TextField, Button, Typography, Paper } from "@material-ui/core";
import './ManagerView.css'; // Tell webpack that App.js uses these style
import { BACKEND_IP } from './BackendConnection';

/**
 * Order History View for last ten orders 
 * in Text format 
 * @param {*} props for form switch
 * @returns View of Order History (last 10)
 */
function OrderHistory(props) {


  const exit = &lt;div class = "exit">&lt;button onClick={() => props.onFormSwitch("manager_view")} type="submit" class="exit_text">Exit&lt;/button>&lt;/div>
  const handleClickOpen = () => {
    setOpen(true);
  };

  const handleClose = () => {
    //doesnt save text fields
    setOpen(false);
  };

  const handleOkClose = () => {
    //saves text field
    setOpen(false);
  };
  const [orderState, setOrderState] = useState(null);

  /**
   * @returns returns the orders to our order history text box
   */
  function loadOrders() {
    fetch(`${BACKEND_IP}/order/getRecentOrders`).then((res) => res.json()).then((orderState) => {
      setOrderState(orderState)
    }, alert)
  }
  useEffect(() => {
    loadOrders()
  }, [])

  /**
   * 
   * @param {*} order 
   * @returns Changes our order into text that we can display
   */
  function convertOrderToText(order) {
    const { items } = order;
    console.log(order); 
    const jsonedit = JSON.stringify(order);
    //const jsonreturn = JSON.parse(order);
    const noitem= "No Items"
    
    
    return &lt;p>Order #{order.order_id}: {JSON.stringify(order.creation_time).substring(13,20)} CST {JSON.stringify(order.creation_time).substring(1,11)}: {order.items.map(item=>item.item_display_name).join(' + ') == "" ? noitem : 
    order.items.map(item=>item.item_display_name).join(' + ')}  &lt;/p> 
  }
  /**
   * Implemented Text for the last 10 Orders
   */
  const textBox = &lt;p> {
      orderState == null ? &lt;h1> Loading... &lt;/h1> : orderState.map(convertOrderToText)   }
    &lt;/p>

  return (
    
    &lt;body class = "background">
    {exit}
    &lt;div class = "orderHistoryDiv">
      &lt;Typography variant="h2">Order History&lt;/Typography>
      {/* {salesState == null ? &lt;h1> loading &lt;/h1> : orderStatae.map((orderInfo)=>())} */}
      
      
      &lt;div class = "orderPaperFormat">
        &lt;Paper elevation={1} style={{width: 1200, height: 800, overflow: "auto" }} >
          &lt;p> {textBox} &lt;/p>
        &lt;/Paper>
      &lt;/div>
      &lt;div class = "orderBTN">

      &lt;/div>

    &lt;/div>
    &lt;/body>
  );
}

export default OrderHistory;


  </code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Inventory">Inventory</a></li><li><a href="global.html#OrderHistory">OrderHistory</a></li><li><a href="global.html#SalesReport">SalesReport</a></li><li><a href="global.html#XZReport">XZReport</a></li><li><a href="global.html#getURLParams">getURLParams</a></li><li><a href="global.html#oauth">oauth</a></li><li><a href="global.html#stock_column_name_map">stock_column_name_map</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue May 02 2023 20:57:49 GMT-0500 (Central Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
